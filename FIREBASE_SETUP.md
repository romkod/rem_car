# Налаштування Firebase для синхронізації даних

## Що було додано

Додано синхронізацію даних між користувачами через Firebase Realtime Database. Тепер всі зміни, зроблені в режимі редагування, автоматично зберігаються і стають доступними всім іншим користувачам в реальному часі.

## Як налаштувати Firebase

### Крок 1: Створіть проект Firebase

1. Перейдіть на [Firebase Console](https://console.firebase.google.com/)
2. Натисніть "Додати проект" або виберіть існуючий проект
3. Дотримуйтесь інструкцій для створення проекту

### Крок 2: Створіть Realtime Database

1. У вашому проекті Firebase перейдіть до розділу "Realtime Database"
2. Натисніть "Створити базу даних"
3. Виберіть регіон (наприклад, `europe-west1`)
4. Почніть з тестового режиму (пізніше налаштуєте правила безпеки)

### Крок 3: Отримайте конфігурацію

1. Перейдіть до налаштувань проекту (⚙️ → Project settings)
2. Прокрутіть до розділу "Ваші додатки"
3. Натисніть на іконку веб-додатку (</>) або "Додати додаток"
4. Зареєструйте додаток (назва може бути будь-якою)
5. Скопіюйте конфігурацію Firebase (об'єкт `firebaseConfig`)

### Крок 4: Налаштуйте конфігурацію в додатку

**✅ Конфігурація вже налаштована в коді!**

Конфігурація Firebase вже додана в `script.js` з вашими даними:
- Project ID: `remcar-a23dc`
- Database URL: `https://remcar-a23dc-default-rtdb.europe-west1.firebasedatabase.app`

Якщо потрібно змінити конфігурацію, можна зробити це через localStorage:

```javascript
localStorage.setItem('firebaseConfig', JSON.stringify({
    apiKey: "ваш-api-key",
    authDomain: "ваш-проект.firebaseapp.com",
    databaseURL: "https://ваш-проект-default-rtdb.firebaseio.com/",
    projectId: "ваш-проект-id",
    storageBucket: "ваш-проект.appspot.com",
    messagingSenderId: "ваш-sender-id",
    appId: "ваш-app-id"
}));
```

Після цього оновіть сторінку (F5).

### Крок 5: Налаштуйте правила безпеки (ВАЖЛИВО!)

У Firebase Console перейдіть до **Realtime Database → Rules** і встановіть:

```json
{
  "rules": {
    "cars": {
      ".read": true,
      ".write": true,
      "$carId": {
        "categories": {
          ".read": true,
          ".write": true
        }
      }
    }
  }
}
```

**АБО для тестування (небезпечно для продакшену):**

```json
{
  "rules": {
    ".read": true,
    ".write": true
  }
}
```

**Увага:** 
- Перший варіант дозволяє читати/записувати тільки в `/cars` та `/cars/{carId}/categories`
- Другий варіант дозволяє будь-кому читати та записувати всі дані (тільки для тестування!)
- Для продакшену обов'язково налаштуйте автентифікацію та обмеження доступу
- Після зміни правил натисніть **"Publish"** для застосування змін

## Структура бази даних

Детальний опис структури бази даних дивіться в файлі **`DATABASE_STRUCTURE.md`**

**Короткий опис:**
- `/cars` - список автомобілів
- `/cars/{carId}` - інформація про автомобіль (brand, model)
- `/cars/{carId}/categories` - масив категорій ремонту
- Кожна категорія містить масив `items` (елементів ремонту)
- Кожен елемент має масив `prices` (цін з описами) та `dependencies` (залежності)

## Як це працює

1. **Збереження змін**: Коли користувач додає, редагує або видаляє категорії/елементи в режимі редагування, дані автоматично зберігаються в Firebase
2. **Синхронізація в реальному часі**: Всі інші користувачі автоматично отримують оновлення через слухач Firebase
3. **Резервне копіювання**: Дані також зберігаються в localStorage як резервний варіант
4. **Індикатор синхронізації**: В інтерфейсі відображається статус синхронізації

## Якщо Firebase не налаштовано

Якщо Firebase не налаштовано або виникла помилка, додаток автоматично використовує localStorage. Дані будуть доступні тільки локально на пристрої користувача.

## Перевірка роботи

1. Відкрийте додаток у двох різних браузерах або вкладках
2. Увійдіть в режим редагування в одному з них
3. Додайте або змініть якийсь елемент
4. У другому браузері/вкладці дані повинні оновитися автоматично

## Примітки

- Для тестування можна використати публічний проект, але для продакшену обов'язково створіть власний проект
- Налаштуйте правила безпеки перед використанням у продакшені
- Рекомендується додати автентифікацію для обмеження доступу до редагування

